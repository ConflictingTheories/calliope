# Event Driven Tree Data Structures
~ 2018-11-25T23:17:23+00:00 ~

I was thinking recently about how to better manage complex event chains and I started thinking about combining the tree data structure concept with the pub-sub event management design pattern.

I am currently building a large complex data structure for one of my projects and it is proving quite a beast to handle. I decided early on to focus on a tree structure for the data as it was heavily nested and classified into groups by design. In order to better manage it, I chose to build a sort of OOP framework around the tree.

The various types of nodes were each given an object with various methods. I then built in a synchronisation system which focused on propagating the changes through the structure as needed and I then connected this to an API for communication with the database. All of this worked out quite well and has proven sufficient for its current needs, the problem has to do with a certain facet of the tree system I refer to as mapping the tree.

By mapping I mean I take various representations of the tree nodes and reduce them to an array of either copies(for some uses) or references to the original nodes (for others). This allows me to manipulate the data being returned for different needs whilst still providing me a constant frame of reference or truth.

Mapping in general works great, but I have found a couple cases that are less than ideal. Most of the time if I wish to reference the original node I can do so by mapping it directly, but sometimes I cannot do this because of incompatibilities between third-party components which require me to make a copy and adjust the structure as needed. This is great for one way transactions such as charts / graphs. But when I need to provide a feedback loop for interactions and changes, I need to have access to the original reference. This has currently resulted in a few hacks and workarounds, none of which have been ideal.

The solution I have come up with as a proposition is to combine the concept of my existing tree structure with that of a pub-sub system for event driven feedback. Rather than having the nodes talk to each other directly or via routing (as is currently being done), they will be able to be communicated via a dispatching system. Since I am dealing with a tree, I will be referring to the dispatching component as the Xylem/Phloem(XP) system or Trunk. The root will still be the main entry point of the tree, but its job will be to instantiate the Trunk and register itself on the network.

This should theoretically increase the throughput of the changes and provides future opportunities to better manage concurrent changes. I also expect this to help reduce the number of communication problems in the future. I donâ€™t expect it to be all sunshine and roses however.

I expect that there are still some hidden complexities that I will need to solved before the system is as good as I am hoping it to be. In order to make it handle the situations I am envisioning (ex. multiple control interfaces with aliased properties) it will have to be able to be easily adapted for different configurations and integrations. I expect it to be based on some form of Object&lt;-&gt;Object rule system that can help automatically bind the necessary relationships together and setup the appropriate pub-sub methods.

The dream is to have a single source of truth that your application is based on. Encapsulated scopes will still be capable for those who wish for ardent security(and extra work) through the use of cloning and parent-child data transfers, but will not be required or enforced. It will be up to the user to develop it as they see fit. This should in the end make the process of managing consistency and variability a task of simplicity and enjoyment rather than one of headaches and frustration.