(this["webpackJsonpcalliope-site-generator"]=this["webpackJsonpcalliope-site-generator"]||[]).push([[0],{133:function(e){e.exports=JSON.parse('{"b":"/content/posts.json","a":"/content/pages.json"}')},266:function(e,t,n){e.exports=n(500)},271:function(e,t,n){},500:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(11),c=n.n(o),s=(n(271),n(125)),i=n(16),l=(n(68),n(69),n(70),n(60),n(8)),u=n.n(l),p=n(12),h=n(18),m=n(20),d=n(25),f=n(24),v=n(54),b=n.n(v);var g=n(210),E=function(){function e(){Object(h.a)(this,e)}return Object(m.a)(e,null,[{key:"authHeader",value:function(){var e=JSON.parse(localStorage.getItem("user")||"{}");return e&&e.authdata?{Authorization:"Basic "+e.authdata}:{Authorization:""}}},{key:"isAuthenticated",value:function(){return!0}},{key:"setAuthData",value:function(e){var t=JSON.parse(localStorage.getItem("user")||"{}");t.authdata=e,localStorage.setItem("user",t),sessionStorage.setItem("user",t)}},{key:"clearAuthData",value:function(){localStorage.removeItem("user"),sessionStorage.removeItem("user")}}]),e}(),O=function(e){var t=e.component,n=Object(g.a)(e,["component"]),a=t||r.a.Component;return r.a.createElement(i.b,Object.assign({},n,{render:function(e){return E.isAuthenticated()?r.a.createElement(a,e):r.a.createElement(i.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},y=n(87),w=n(66),k=n(26),j=n(505),S=n(3),x=n(42),C=n(504),N=n(512),T=n(513),D=n(509),_=n(510),A=n(514),I=n(508),P=n(515),W=n(201),R=function e(){Object(h.a)(this,e)};function U(e){return J.apply(this,arguments)}function J(){return(J=Object(p.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.text().then(function(){var e=Object(p.a)(u.a.mark((function e(n){var a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(401!==t.status){e.next=11;break}e.next=6;break;case 4:e.next=9;break;case 6:return e.next=8,M();case 8:case 9:e.next=16;break;case 11:if(a=n&&JSON.parse(n),t.ok){e.next=15;break}return r=a&&a.message||t.statusText,e.abrupt("return",Promise.reject(r));case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}R.host=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).API_HOST||"http://localhost",R.port=parseInt(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).APP_PORT||"8081"),R.ver=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).API_VERSION||"v1",R.get=function(){var e=Object(p.a)(u.a.mark((function e(t){var n,a,r,o=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},a={method:"GET",headers:E.authHeader()},r=Object.keys(n).map((function(e){return e+"="+n[e]})).join("&")||"",e.abrupt("return",fetch("".concat(R.host,":").concat(R.port,"/api/").concat(R.ver).concat(t,"?").concat(r),a).then(U));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R.post=function(){var e=Object(p.a)(u.a.mark((function e(t){var n,a,r=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},a={method:"POST",headers:Object(W.a)({"Content-Type":"application/json"},E.authHeader()),body:JSON.stringify(n)},e.abrupt("return",fetch("".concat(R.host,":").concat(R.port,"/api/").concat(R.ver).concat(t),a).then(U));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var L=R;function H(){return K.apply(this,arguments)}function K(){return(K=Object(p.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",L.get("/auth").then((function(e){return e&&(console.log(e),sessionStorage.setItem("user",JSON.stringify(e)),localStorage.setItem("user",JSON.stringify(e))),{isAuth:E.isAuthenticated()}})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(){return(B=Object(p.a)(u.a.mark((function e(t,n){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={username:t,password:n},e.abrupt("return",L.post("/auth/login",a).then((function(e){return e&&(e.authdata=JSON.stringify(e),localStorage.setItem("user",JSON.stringify(e)),sessionStorage.setItem("user",JSON.stringify(e))),e})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(){return F.apply(this,arguments)}function F(){return(F=Object(p.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",L.post("/auth/logout").then((function(){localStorage.removeItem("user"),sessionStorage.removeItem("user")})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var G=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).handleChange=a.handleChange.bind(Object(w.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(w.a)(a)),a.store=e.store,a.state={username:"",password:"",submitted:!1,loading:!1,error:""},a}return Object(m.a)(n,[{key:"componentDidMount",value:function(){var e=Object(p.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H();case 2:t=e.sent,this.store.auth=t,console.log(t),t.isAuth&&(n={from:{pathname:"/"}}.from,this.props.history.push(n));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleChange",value:function(e){var t=e.target,n=t.name,a=t.value;this.setState(Object(y.a)({},n,a))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.setState({submitted:!0});var n=this.state,a=n.username,r=n.password;a&&r&&(this.setState({loading:!0}),function(e,t){return B.apply(this,arguments)}(a,r).then((function(e){console.log(e);var n=(t.props.location.state||{from:{pathname:"/"}}).from;t.props.history.push(n)}),(function(e){return t.setState({error:e,loading:!1})})))}},{key:"render",value:function(){var e=this.state,t=e.username,n=e.password,a=e.submitted,o=e.loading,c=e.error;return r.a.createElement(C.a,{style:{background:"linear-gradient(45deg, rgba(37, 1, 63, 0.52), black)"}},r.a.createElement(N.a,null),r.a.createElement(T.a,null,r.a.createElement(D.a,{justify:"center"},r.a.createElement(D.a.Item,{colspan:24},r.a.createElement("div",{className:"App-splash",style:{backgroundColor:"transparent"}},r.a.createElement(_.a,{bodyFill:!0},r.a.createElement(C.a,{style:{backgroundColor:"#30404d"}},r.a.createElement(A.a,{style:{width:"320px"}},r.a.createElement("img",{src:b.a,height:"320",style:{background:"linear-gradient(45deg,indigo,black)"}})),r.a.createElement(C.a,{style:{width:"320px"}},r.a.createElement(T.a,{style:{padding:"1em"}},r.a.createElement(I.a,{fluid:!0},r.a.createElement(j.c,{label:"Username or email address",helperText:a&&!t&&"Username is required"},r.a.createElement(j.d,{className:a&&!t?S.a.INTENT_DANGER:"",leftIcon:"user",type:"text",name:"username",value:t,onChange:this.handleChange})),r.a.createElement(j.c,{label:"Password",helperText:a&&!n&&"Password is required"},r.a.createElement(j.d,{className:a&&!n?S.a.INTENT_DANGER:"",leftIcon:"lock",type:"password",name:"password",value:n,onChange:this.handleChange})),r.a.createElement(j.c,null,r.a.createElement(P.a,null,r.a.createElement(j.a,{onClick:this.handleSubmit,disabled:o},"Login"),r.a.createElement(j.a,{minimal:!0},"Forgot password?"))),c&&r.a.createElement(j.b,{intent:x.a.DANGER,title:"Error"},c)))))))))))}}]),n}(r.a.Component),V=Object(k.collect)(G),q=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"componentDidMount",value:function(){var e=Object(p.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M();case 3:return e.prev=3,t=this.props.location.state||{from:{pathname:"/login"}},n=t.from,this.props.history.push(n),e.finish(3);case 7:case"end":return e.stop()}}),e,this,[[0,,3,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(C.a,{style:{background:"linear-gradient(45deg, rgba(37, 1, 63, 0.52), black)"}},r.a.createElement(N.a,null),r.a.createElement(T.a,null,r.a.createElement(D.a,{justify:"center"},r.a.createElement(D.a.Item,{colspan:24},r.a.createElement("div",{className:"App-splash",style:{backgroundColor:"transparent"}},r.a.createElement(_.a,{bodyFill:!0},r.a.createElement(C.a,{style:{backgroundColor:"#30404d"}},r.a.createElement(A.a,{style:{width:"320px"}},r.a.createElement("img",{src:b.a,height:"320",style:{background:"linear-gradient(45deg,indigo,black)"}})),r.a.createElement(C.a,{style:{width:"320px"}},r.a.createElement(T.a,{style:{padding:"1em"}},"Please Wait - Returning to Login")))))))))}}]),n}(r.a.Component),z=Object(k.collect)(q),Y=n(507),$=n(511),Q=n(506),X=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).store=e.store,a.state={},a}return Object(m.a)(n,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null)}}]),n}(a.Component),Z=Object(k.collect)(X),ee=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).store=e.store,a.state={},a}return Object(m.a)(n,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null)}}]),n}(a.Component),te=Object(k.collect)(ee),ne=n(209),ae=n.n(ne),re=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).state={src:e.src,content:null},a}return Object(m.a)(n,[{key:"componentDidMount",value:function(){var e=Object(p.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.src||""===this.state.src){e.next=10;break}return e.next=3,fetch("/content/"+this.state.src);case 3:if(!(t=e.sent).ok){e.next=10;break}return e.next=7,t.text();case 7:n=e.sent,console.log(n),this.setState({content:n});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.state.content;return r.a.createElement(r.a.Fragment,{className:"calliope-post"},r.a.createElement("hr",null),r.a.createElement(ae.a,{children:e}),r.a.createElement("hr",null))}}]),n}(a.Component),oe=Object(k.collect)(re),ce=n(133);function se(){return ie.apply(this,arguments)}function ie(){return(ie=Object(p.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(ce.b);case 2:return e.next=4,e.sent.json();case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var le,ue=Y.a.Paragraph,pe=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e){return Object(h.a)(this,n),t.call(this,e)}return Object(m.a)(n,[{key:"renderDashboardTabs",value:function(){var e;return r.a.createElement(r.a.Fragment,null,r.a.createElement(j.b,{intent:x.a.SUCCESS,title:"Calliope :: Your New Website - Loaded \u2713"},r.a.createElement(ue,{width:320,rows:3})),r.a.createElement(C.a,null,r.a.createElement(T.a,null,k.store.posts&&(null===(e=k.store.posts)||void 0===e?void 0:e.map((function(e){return r.a.createElement($.a,null,r.a.createElement(C.a,{className:"calliope-list-item"},r.a.createElement(oe,{src:"posts/".concat(e)})))}))))))}},{key:"componentDidMount",value:function(){var e=Object(p.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se();case 2:(t=e.sent)&&(console.log(t),k.store.posts=t,setTimeout((function(){return Q.a.open({title:"Welcome \ud83d\udc19\ud83d\udc7e - Calliope",description:r.a.createElement(ue,{width:320,rows:3})})}),~~(1e4*Math.random())));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{style:{display:"flex",flex:1,flexDirection:"row",minHeight:"100vh"}},r.a.createElement(te,{activeKey:"1",style:{flex:1,flexShrink:1,flexGrow:0}}),r.a.createElement("div",{style:{display:"flex",flex:1,flexDirection:"row"}},r.a.createElement(C.a,null,r.a.createElement(Z,{isLogin:!1,renderBrand:this.renderClientSelect,renderBar:function(){return null},renderRight:function(){return null}}),r.a.createElement(T.a,null,this.renderDashboardTabs()))))}}]),n}(r.a.Component),he=Object(k.collect)(pe),me=(le=function(){return r.a.createElement(s.a,null,r.a.createElement("div",{className:"container"},r.a.createElement(i.d,null,r.a.createElement(i.b,{path:"/login",component:V}),r.a.createElement(O,{exact:!0,path:"/logout",component:z}),r.a.createElement(O,{path:"/dashboard",component:he}),r.a.createElement(O,{path:"*",component:he}))))},function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).state={loading:!0},a}return Object(m.a)(n,[{key:"componentDidMount",value:function(){var e=Object(p.a)(u.a.mark((function e(){var t=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{setTimeout((function(){t.setState({loading:!1})}),1500)}catch(n){console.log(n),this.setState({loading:!1})}case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.loading?r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-splash"},r.a.createElement("img",{src:b.a,className:"App-logo",alt:"logo"}),r.a.createElement("p",null,"Please, wait a moment while we load the application."))):r.a.createElement(le,this.props)}}]),n}(r.a.Component)),de=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function fe(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}c.a.render(r.a.createElement(me,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");de?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):fe(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):fe(t,e)}))}}()},54:function(e,t,n){e.exports=n.p+"static/media/logo.0725e78b.svg"},60:function(e,t,n){}},[[266,1,2]]]);
//# sourceMappingURL=main.958d1ead.chunk.js.map